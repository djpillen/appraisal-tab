<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="appraisalTab" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="appraisalTab" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="appraisalTab" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="appraisalTab" ng-controller="MainController" class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Appraisal tab</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
  <link rel="stylesheet" href="bower_components/fontawesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="vendor/angular-tree-control/css/tree-control.css">
  <link rel="stylesheet" href="vendor/angular-tree-control/css/tree-control-attribute.css">
  <link rel="stylesheet" href="css/directory-picker.css">
  <link rel="stylesheet" href="css/file-explorer.css">
  <link rel="stylesheet" href="css/search.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="app.css">
</head>
<body>
  <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  <nav class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid">
      <div class='navbar-header'>
        <a class="navbar-brand">Archivematica</a>
        <ul class="nav navbar-nav" role='menubar'>
          <li><a>Transfer</a></li>
          <li class="active"><a>Appraisal</a></li>
          <li><a>Ingest</a></li>
          <li><a>Archival storage</a></li>
          <li><a>Preservation planning</a></li>
          <li><a>Access</a></li>
          <li><a>Administration</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <form id='search_form'>
  <div id='search_form_container'>
    <div class="advanced_search_form_rows_container">
    <div class="advanced_search_form_row" style="clear:both">
    <div class="advanced_search_form_field_op" style="float:left">
    </div>
    <div class="advanced_search_form_field_query" style="float:left">
    <input class="aip-search-query-input" title="search query"></div>
    <div class="advanced_search_form_field_field" style="float:left">
    <select title="field name">
    <option value="">Any</option>
    <option value="filename">File name</option>
    <option value="file_extension">File extension</option>
    <option value="accessionid">Accession number</option>
    <option value="ingestdate">Ingest date (YYYY-MM-DD)</option>
    <option value="sipuuid">SIP UUID</option>
    </select></div>
    <div class="advanced_search_form_field_type" style="float:left">
    <select title="query type">
    <option value="term">Keyword</option>
    <option value="string">Phrase</option>
    </select></div>
    </div>
    <div style="clear:both"><a>Add New</a></div>
    </div>
  </div>
  <div id='search_form_submit_container'>
    <input type='button' id='search_submit' value='Search transfer backlog'>
  </div>
  </form>

  <div style='clear:both'></div>

  <div class='facet-box panel panel-body form' ng-controller="FacetController">
    <fieldset>
      <label for='tag-facet'>Tags</label>
      <select ng-model="tag_facet" class='form-control' id='tag-facet'>
        <option value="">All</option>
        <option ng-repeat="tag in tags.tags" value="{{ tag }}">{{ tag }}</option>
      </select>
    </fieldset>

    <fieldset>
      <label for='start-date-facet'>Date range start</label>
      <input type="text" ng-model="date_start" class='form-control' id='start-date-facet'/>
      <label for='end-date-facet'>Date range end</label>
      <input type="text" ng-model="date_end" class='form-control' id='end-date-facet'/>
    </fieldset>

    <ul class='list-inline'>
      <li ng-repeat="facet in Facet.facet_list">
        {{ facet.name }}: {{ facet.text }} <span ng-click="remove_facet(facet.facet, facet.id);"><i class="fa fa-times"></i></span>
      </li>
    </ul>
  </div>

  <ui-minimize-bar>

  <ui-minimize-panel title='Backlog' open='true'>
    <div class='panel panel-default'>
      <div class='panel-heading'>
        Backlog
      </div>
      <div class="transfer-tree panel-body" ng-controller="TreeController">
        <treecontrol class="tree-classic"
                     tree-model="transfers.data"
                     options="options"
                     on-selection="track_selected(node, selected)"
                     selected-nodes="files.selected"
                     filter-expression="filter_expression"
                     filter-comparator="filter_comparator">
          <span tree-draggable helper="helper" uuid="{{ node.id }}">
            {{ node.title }} <span class="tag" ng-repeat="tag in node.tags">{{ tag }} <span ng-click="remove_tag(id, tag)"><i class="fa fa-minus-square"></i></span></span>
          </span>
        </treecontrol>

        <input type="button" value="Deselect all" ng-click="deselect()">

        <form ng-submit="submit()">
          <input type="text"
                 ng-model="tag"
                 ng-disabled="files.selected.length < 1">
          <input type="submit"
                 id="submit-tag"
                 value="Add tag"
                 ng-disabled="files.selected.length < 1">
        </form>
      </div>
    </div>
  </ui-minimize-panel>

  <ui-minimize-panel title="Analysis" open='true'>
    <div class='panel panel-default'>
      <div>
        <ul class="nav nav-pills nav-pane" role='menu'>
          <li ng-class="{ active: $routeSegment.contains('analysis') }">
            <a href="#{{ $routeSegment.getSegmentUrl('analysis') }}">Analysis</a>
          </li>
          <li ng-class="{ active: $routeSegment.contains('examine_contents') }">
            <a href="#{{ $routeSegment.getSegmentUrl('examine_contents', {type: ''}) }}">Examine contents</a>
          </li>
          <li ng-class="{ active: $routeSegment.contains('preview') }">
            <a href="#{{ $routeSegment.getSegmentUrl('preview', {id: ''}) }}">Preview file</a>
          </li>
        </ul>
      </div>
      <div class='panel-body' app-view-segment="0"></div>
    </div>
  </ui-minimize-panel>

  <ui-minimize-panel title="File list" open='false'>
    <div class='panel panel-default'>
      <div class='panel-heading'>
        File List
      </div>
      <div class='panel-body' ng-controller="FileListController">
        <div ng-if="file_list.files.length > 0">
          <form ng-submit="submit(selected)">
            <input type="text"
                   ng-model="tag"
                   ng-disabled="selected.length < 1">
            <input type="submit"
                   id="submit-tag"
                   value="Add tag to selected files"
                   ng-disabled="selected.length < 1">
          </form>

          <input type="checkbox"
                 name="checked_files[]"
                 value="Select all"
                 ng-checked="all_selected"
                 ng-click="select_all()">
          Select all
          <table>
          <tr>
            <th>Filename</th>
            <th>Size</th>
            <th>Last modified</th>
            <th>Tags</th>
          </tr>
          <tr ng-repeat="file in file_list.files">
            <td>
              <input checklist
                   name="checked_files[]"
                   ng-model="file"
                   ng-checked="selected.indexOf(file.id) > -1"
                   record-count="file_list.files.length"
                   selected-list="selected"
                   all-selected="all_selected">
              <a href="#{{ $routeSegment.getSegmentUrl('preview', {id: file.id}) }}">{{ file.title }}</a>
              <i class="fa fa-minus-square" style="float: right;" ng-click="remove_file(file.id)"></i>
            </td>
            <td>{{ file.size }}</td>
            <td>{{ file.last_modified }}</td>
            <td>
              <span class="tag" ng-repeat="tag in file.tags">{{ tag }} <span ng-click="remove_tag(file.id, tag)"><i class="fa fa-minus-square"></i></span></span>
            </td>
          </tr>
          </table>
        </div>
        <p ng-if="file_list.files.length === 0">File list is empty.</p>
      </div>
    </div>
  </ui-minimize-panel>

  <ui-minimize-panel title='ArchivesSpace'>
    <div class='panel panel-default'>
      <div class='panel-heading'>
        ArchivesSpace
      </div>
      <div class="transfer-tree panel-body" ng-controller="ArchivesSpaceController">
        <treecontrol id="archivesspace-tree"
               class="tree-classic"
               tree-model="data"
               options="options"
               on-node-toggle="on_toggle(node, expanded)"
               expanded-nodes="expanded_nodes">
          <span tree-droppable on-drop="drop">
            {{ node.title }} <div ng-if="node.identifier">({{ node.identifier }})</div>
          </span>
        </treecontrol>
      </div>
    </div>
  </ui-minimize-panel>
  </ui-minimize-bar>
  <!-- In production use:
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/x.x.x/angular.min.js"></script>
  -->
  <script src="bower_components/angular/angular.js"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="bower_components/angular-route-segment/build/angular-route-segment.js"></script>
  <script src="bower_components/d3/d3.js"></script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/jqueryui/jquery-ui.min.js"></script>
  <script src="bower_components/lodash/dist/lodash.min.js"></script>
  <script src="bower_components/restangular/dist/restangular.min.js"></script>
  <script src="bower_components/angular-charts/dist/angular-charts.min.js"></script>
  <script src="vendor/angular-tree-control/angular-tree-control.js"></script>
  <script src="app.js"></script>
  <script src="ui/ui.directive.js"></script>
  <script src="checklist/checklist.directive.js"></script>
  <script src="tree/tree.directive.js"></script>
  <script src="services/archivesspace.service.js"></script>
  <script src="services/facet.service.js"></script>
  <script src="services/file.service.js"></script>
  <script src="services/file_list.service.js"></script>
  <script src="services/selected.service.js"></script>
  <script src="services/tag.service.js"></script>
  <script src="services/transfer.service.js"></script>
  <script src="filters/aggregation.filter.js"></script>
  <script src="filters/facet.filter.js"></script>
  <script src="archivesspace/archivesspace.controller.js"></script>
  <script src="analysis/analysis.controller.js"></script>
  <script src="examine_contents/examine_contents.controller.js"></script>
  <script src="facet_selector/facet_selector.controller.js"></script>
  <script src="file_list/file_list.controller.js"></script>
  <script src="preview/preview.controller.js"></script>
  <script src="tree/tree.controller.js"></script>
  <script src="report/report.controller.js"></script>
  <script src="visualizations/visualizations.controller.js"></script>
  <script src="components/version/version.js"></script>
  <script src="components/version/version-directive.js"></script>
  <script src="components/version/interpolate-filter.js"></script>
</body>
</html>
